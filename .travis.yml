language: go
go:
- 1.9
install:
- go get -u github.com/golang/dep/cmd/dep
- dep ensure
env:
  global:
  - VERSION="`git describe --tags`"
script:
- GOOS=linux go build -o collect_${VERSION}_linux
- GOOS=freebsd go build -o collect_${VERSION}_freebsd
- GOOS=darwin go build -o collect_${VERSION}_darwin
deploy:
  provider: releases
  api_key: ${GITHUB_API_KEY}
  file_glob: true
  file: collect_${VERSION}_*
  skip_cleanup: true
  on:
    tags: true
